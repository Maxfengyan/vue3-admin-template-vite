var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,i=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&s(e,n,t[n]);if(a)for(var n of a(t))r.call(t,n)&&s(e,n,t[n]);return e},c=(e,a)=>t(e,n(a));import{d as l,c as m,o as d,r as u,a as p,t as h,T as b,u as _,w as g,p as v,b as f,e as E,F as y,f as C,g as w,h as S,i as O,j as T,k as A,l as x,m as I,n as L,q as k,s as P,v as j,x as R,E as D,C as N,y as M,_ as V,z as B,A as q,B as U,D as G,G as $,H,I as z,J,K,L as F,M as Q,N as W,O as X,P as Y,Q as Z,R as ee,S as te}from"./vendor.08da2969.js";const ne=l({name:"App",components:{}});let ae;ne.render=function(e,t,n,a,o,r){const s=u("router-view");return d(),m(s)};const oe={},re=function(e,t){if(!t)return e();if(void 0===ae){const e=document.createElement("link").relList;ae=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in oe)return;oe[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":ae,t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((e,t)=>{a.addEventListener("load",e),a.addEventListener("error",t)})):void 0}))).then((()=>e()))};const se=l({props:{collapse:{required:!0,type:Boolean}},setup(e){const t=_();return{system_name:"EPG管理系统",logo:"logo1",jumpDashboard:()=>{t.push("/")}}}}),ie=g();v("data-v-632ba278");const ce={key:0},le={key:1};f();const me=ie(((e,t,n,a,o,r)=>{const s=u("svg-icon");return d(),m("div",{class:["sidebar-logo-container",{collapse:e.collapse}],onClick:t[1]||(t[1]=(...t)=>e.jumpDashboard&&e.jumpDashboard(...t))},[p(b,{name:"fade"},{default:ie((()=>[e.collapse?(d(),m("div",ce,[p(s,{class:"logo-account",name:e.logo},null,8,["name"]),p("span",null,h(e.system_name),1)])):(d(),m("div",le,[p(s,{class:"logo-account",name:e.logo},null,8,["name"])]))])),_:1})],2)}));se.render=me,se.__scopeId="data-v-632ba278";const de={props:{icon:{type:String},title:{type:String,required:!0}}},ue={style:{"user-select":"none"}};de.render=function(e,t,n,a,o,r){const s=u("svg-icon");return d(),m(y,null,[n.icon?(d(),m(s,{key:0,name:n.icon},null,8,["name"])):E("",!0),p("span",ue,h(n.title),1)],64)};var pe=(e=[])=>e.filter((e=>{if(!e.hidden)return!0}));const he=l({name:"SidebarItem",props:{item:{required:!0,type:Object},isNest:{type:Boolean,default:!1},basePath:{required:!0,type:String}},components:{Item:de},setup(e){const{basePath:t}=e,n=_();let a=C({});const o=e=>t+"/"+e;return{hasOneShowingChild:(e=[],t)=>{const n=e.filter((e=>!e.hidden&&(a.value=e,!0)));return 1===n.length||0===n.length&&(a.value=c(i({},t),{path:"",noShowingChildren:!0}),!0)},onlyOneChild:a,resolvePath:o,handleChildren:pe,jump:e=>{!function(e){return/^(https?:|mailto:|tel:)/.test(e)}(e)?n.push(o(e)):window.location.href=e}}}});he.render=function(e,t,n,a,o,r){const s=u("item"),i=u("el-menu-item"),c=u("sidebar-item",!0),l=u("el-submenu");return!e.hasOneShowingChild(e.item.children,e.item)||e.onlyOneChild.children&&!e.onlyOneChild.noShowingChildren||e.item.alwaysShow?(d(),m(l,{key:1,index:e.resolvePath(e.onlyOneChild.path),"popper-append-to-body":"",class:"nest-menu"},{title:w((()=>[e.item.meta?(d(),m(s,{key:0,icon:e.item.meta&&e.item.meta.icon,title:e.item.meta.title},null,8,["icon","title"])):E("",!0)])),default:w((()=>[(d(!0),m(y,null,S(e.handleChildren(e.item.children),(t=>(d(),m(c,{"is-nest":!0,item:t,"base-path":e.resolvePath(t.path)},null,8,["item","base-path"])))),256))])),_:1},8,["index"])):(d(),m(i,{key:0,index:e.resolvePath(e.onlyOneChild.path),class:{"submenu-title-noDropdown":!e.isNest},onClick:t[1]||(t[1]=t=>e.jump(e.onlyOneChild.path))},{default:w((()=>[e.onlyOneChild.meta?(d(),m(s,{key:0,icon:e.onlyOneChild.meta.icon||e.item.meta&&e.item.meta.icon,title:e.onlyOneChild.meta.title},null,8,["icon","title"])):E("",!0)])),_:1},8,["index","class"]))};const be=l({components:{SidebarItem:he,Logo:se},setup(){const e=JSON.parse("true"),t=A(),n=O((()=>t.getters.sidebar)),a=O((()=>t.getters.routes)),{path:o}=T();return{isCollapse:n,routes:a,path:o,showLogo:e,handleChildren:pe}}});be.render=function(e,t,n,a,o,r){const s=u("logo"),i=u("sidebar-item"),c=u("el-menu"),l=u("el-scrollbar");return d(),m("div",{class:{"has-logo":e.showLogo}},[e.showLogo?(d(),m(s,{key:0,collapse:e.isCollapse},null,8,["collapse"])):E("",!0),p(l,{"wrap-class":"scrollbar-wrapper"},{default:w((()=>[p(c,{mode:"vertical","default-active":e.path,collapse:!e.isCollapse,"background-color":"#304156","text-color":"#bfcbd9","unique-opened":!1,"active-text-color":"#409EFF"},{default:w((()=>[(d(!0),m(y,null,S(e.handleChildren(e.routes),(e=>(d(),m(i,{item:e,"base-path":e.path},null,8,["item","base-path"])))),256))])),_:1},8,["default-active","collapse"])])),_:1})],2)};const _e=l({name:"Hamburger",props:{isActive:{type:Boolean,required:!0,default:!1}},setup:(e,{emit:t})=>({toggleSidebar:()=>{t("changeActive")}})}),ge=p("path",{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z"},null,-1);_e.render=function(e,t,n,a,o,r){return d(),m("div",{style:{padding:"0 15px"},onClick:t[1]||(t[1]=(...t)=>e.toggleSidebar&&e.toggleSidebar(...t))},[(d(),m("svg",{class:[{"is-active":e.isActive},"hamburger"],viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},[ge],2))])};const ve={watch:{$route(){this.getBreadcrumb()}},created(){this.getBreadcrumb()},data:()=>({levelList:[]}),methods:{getBreadcrumb(){let e=this.$route.matched.filter((e=>e.meta&&e.meta.title));const t=e[0];this.isDashboard(t)||(e=[{path:"/dashboard",meta:{title:"主页"}}].concat(e)),this.levelList=e.filter((e=>e.meta&&e.meta.title&&!1!==e.meta.breadcrumb))},isDashboard(e){const t=e&&e.name;return!!t&&t.trim().toLocaleLowerCase()==="Dashboard".toLocaleLowerCase()},pathCompile(e){const{params:t}=this.$route;return x(e)(t)},handleLink(e){const{redirect:t,path:n}=e;t?this.$router.push(t):e.children||this.$router.push(this.pathCompile(n))}}},fe=g();v("data-v-7d861e00");const Ee={key:0,class:"no-redirect"};f();const ye=fe(((e,t,n,a,o,r)=>{const s=u("el-breadcrumb-item"),i=u("el-breadcrumb");return d(),m(i,{class:"app-breadcrumb",separator:"/"},{default:fe((()=>[p(I,{name:"breadcrumb"},{default:fe((()=>[(d(!0),m(y,null,S(o.levelList,((e,t)=>(d(),m(s,{key:e.path},{default:fe((()=>["noRedirect"===e.redirect||t==o.levelList.length-1?(d(),m("span",Ee,h(e.meta.title),1)):(d(),m("a",{key:1,onClick:L((t=>r.handleLink(e)),["prevent"])},h(e.meta.title),9,["onClick"]))])),_:2},1024)))),128))])),_:1})])),_:1})}));ve.render=ye,ve.__scopeId="data-v-7d861e00";const Ce={setup(){const e=A(),t=_();return{userName:e.getters.userName,handleCommand:n=>{"personInfo"===n||e.dispatch("Logout").then((()=>{t.push("/login")}))}}}},we=g();v("data-v-408a7d3a");const Se={class:"avatar-container"},Oe={class:"el-dropdown-link"},Te=p("i",{class:"el-icon-caret-bottom"},null,-1),Ae=k("个人信息"),xe=k("退出登录");f();const Ie=we(((e,t,n,a,o,r)=>{const s=u("svg-icon"),i=u("el-dropdown-item"),c=u("el-dropdown-menu"),l=u("el-dropdown");return d(),m("div",Se,[p(l,{onCommand:a.handleCommand},{dropdown:we((()=>[p(c,null,{default:we((()=>[p(i,{command:"personInfo",divided:""},{default:we((()=>[Ae])),_:1}),p(i,{command:"logout",divided:""},{default:we((()=>[xe])),_:1})])),_:1})])),default:we((()=>[p("div",Oe,[p(s,{name:"user",class:"acatar-icon"}),p("span",null,h(a.userName),1),Te])])),_:1},8,["onCommand"])])}));Ce.render=Ie,Ce.__scopeId="data-v-408a7d3a";const Le=l({components:{Hamburger:_e,Breadcrumb:ve,Userinfo:Ce},setup(){const e=A();return{sidebar:O((()=>e.getters.sidebar)),toggleSidebar:()=>{e.dispatch("ChangeSidebar")}}}}),ke=g();v("data-v-6b6c71c9");const Pe={class:"navbar"};f();const je=ke(((e,t,n,a,o,r)=>{const s=u("hamburger"),i=u("breadcrumb"),c=u("userinfo");return d(),m("div",Pe,[p(s,{"is-active":e.sidebar,class:"hamburger-container",onChangeActive:e.toggleSidebar},null,8,["is-active","onChangeActive"]),p(i,{class:"breadcrumb-container"}),p(c)])}));Le.render=je,Le.__scopeId="data-v-6b6c71c9";const Re=l({setup(){}}),De=g();v("data-v-0d77b8fb");const Ne={class:"app-main"};f();const Me=De(((e,t,n,a,o,r)=>{const s=u("router-view");return d(),m("section",Ne,[p(s,null,{default:De((({Component:e})=>[p(b,{name:"fade-transform",mode:"out-in"},{default:De((()=>[(d(),m(P(e)))])),_:2},1024)])),_:1})])}));Re.render=Me,Re.__scopeId="data-v-0d77b8fb";const Ve=l({components:{Sidebar:be,Navbar:Le,Appmain:Re},setup(){const e=A();return{sidebar:O((()=>e.getters.sidebar))}}}),Be=g();v("data-v-0691d811");const qe={class:"main-container"};f();const Ue=Be(((e,t,n,a,o,r)=>{const s=u("sidebar"),i=u("navbar"),c=u("appmain");return d(),m("div",{class:[{hideSidebar:!e.sidebar},"app-wrapper"]},[p(s,{class:"sidebar-container"}),p("div",qe,[p(i),p(c)])],2)}));Ve.render=Ue,Ve.__scopeId="data-v-0691d811";const Ge=[{path:"/nested",component:Ve,name:"Nested",meta:{title:"Nested",icon:"nest"},children:[{path:"menu1",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),name:"Menu1",meta:{title:"Menu1"},children:[{path:"menu1-1",hidden:!0,component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),name:"Menu1-1",meta:{title:"Menu1-1"}},{path:"menu1-2",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),name:"Menu1-2",meta:{title:"Menu1-2"},children:[{path:"menu1-2-1",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),name:"Menu1-2-1",meta:{title:"Menu1-2-1"}},{path:"menu1-2-2",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),name:"Menu1-2-2",meta:{title:"Menu1-2-2"}}]},{path:"menu1-3",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),name:"Menu1-3",meta:{title:"Menu1-3"}}]},{path:"menu2",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),meta:{title:"menu2"}}]},{path:"/template",component:Ve,name:"Template",redirect:"/template/create",meta:{title:"模板管理",role:"template",icon:"template"},children:[{path:"create",name:"template-create",component:()=>re((()=>import("./index.b322e2d9.js")),["./assets/index.b322e2d9.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),meta:{title:"模板创建",icon:"template-create",role:"template-create"}},{path:"audit",name:"template-audit",component:()=>re((()=>import("./index.c11fb94f.js")),["./assets/index.c11fb94f.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),meta:{title:"模板审核",icon:"template-audit",role:"template-audit"}}]},{path:"/portal",component:Ve,name:"Portal",redirect:"/portal/create",meta:{role:"portal",icon:"portal"},children:[{path:"create",name:"portal-create",component:()=>re((()=>import("./index.55f5a1cf.js")),["./assets/index.55f5a1cf.js","./assets/index.db66d5eb.css","./assets/vendor.08da2969.js"]),meta:{title:"门户创建",icon:"portal-create",role:"portal-create"}}]},{path:"/extra",name:"Extra",component:()=>re((()=>import("./index.a3c49a5c.js")),["./assets/index.a3c49a5c.js","./assets/index.5bad938a.css","./assets/vendor.08da2969.js"]),children:[{path:"http://www.baidu.com",meta:{title:"外链",icon:"link"}}]},{path:"/:pathMatch(.*)*",hidden:!0,name:"404",component:()=>re((()=>import("./index.a3c49a5c.js")),["./assets/index.a3c49a5c.js","./assets/index.5bad938a.css","./assets/vendor.08da2969.js"])}],$e=[{path:"/",name:"index",redirect:"/dashboard/index"},{path:"/dashboard",name:"Dashboard",component:Ve,redirect:"/dashboard/index",children:[{name:"Index",path:"index",component:()=>re((()=>import("./index.8cabea6f.js")),["./assets/index.8cabea6f.js","./assets/index.282d28b6.css","./assets/vendor.08da2969.js"])}]},{path:"/login",name:"login",component:()=>re((()=>import("./index.0940f4a3.js")),["./assets/index.0940f4a3.js","./assets/index.48c90347.css","./assets/vendor.08da2969.js"])}],He=j({history:R(),routes:$e});var ze={namespaced:!0,state:{bgColor:"#2d3a4b",contentColor:"#fff"},mutations:{SET_BGCOLOR:(e,t)=>{e.bgColor=t}},actions:{Changebgcolor(e,t){e.commit("SET_BGCOLOR",t)}}};class Je{constructor(e,t){this.url=e,this.axiosInstance=null,this.createService(e,t)}createService(e,t){const n=t||1e4;this.axiosInstance=D.create({baseURL:e,withCredentials:!0,timeout:n}),this.interceptorsRequestToken(),this.interceptorsResponseToken()}interceptorsRequestToken(){this.axiosInstance.interceptors.request.use((e=>(e.url=this.handleJsonSuffix(e.url),e)),(e=>Promise.reject(e)))}interceptorsResponseToken(){this.axiosInstance.interceptors.response.use((e=>e.data),(e=>Promise.reject(e)))}getUrl(){return this.url}getInstance(){return this.axiosInstance}handleJsonSuffix(e){return e}}const Ke=new Je(window.api.epgms).getInstance();function Fe(e,t=Ge){const n=[];return t.forEach((t=>{const a=i({},t);(function(e,t){return!t.meta||!t.meta.role||e.some((e=>e===t.meta.role))})(e,a)&&(a.children&&(a.children=Fe(e,a.children)),n.push(a))})),n}const Qe="epgms-token";function We(){return N.get(Qe)}var Xe=M({modules:{skin:ze,user:{namespace:!0,state:{token:We(),userName:N.get("epgms-username"),account:"",avatar:"",sidebar:!0,routes:[]},mutations:{SET_TOKEN:(e,t)=>{e.token=t},SET_NAME:(e,t)=>{e.userName=t},SET_ACCOUNT:(e,t)=>{e.account=t},SET_AVATAR:(e,t)=>{e.avatar=t},SET_SIDEBAR:e=>{e.sidebar=!e.sidebar},SET_ROUTES:(e,t)=>{e.routes=t}},actions:{async LoginAction(e,t){const{account:n,password:a}=t;var o=await(e=>Ke({url:"/account/login.json",method:"get",data:e}))({account:n.trim(),password:a.trim()});const{data:r}=o,{token:s,userName:i,avator:c,userAccount:l}=r;var m;e.commit("SET_TOKEN",s),e.commit("SET_NAME",i),e.commit("SET_AVATAR",c),e.commit("SET_ACCOUNT",l),function(e){N.set(Qe,e)}(s),m=i,N.set("epgms-username",m)},async GetUserInfo(e,t){const n=await(e=>Ke({url:"/account/getUserInfo.json",method:"get",data:e}))(t),{data:a}=n,{roles:o}=a;return o},async Logout(e){Ke({url:"/account/logout.json",method:"get"}).then((()=>{e.commit("SET_TOKEN",""),e.commit("SET_NAME",""),e.commit("SET_AVATAR",""),e.commit("SET_ACCOUNT",""),N.remove(Qe)}))},ChangeSidebar(e){e.commit("SET_SIDEBAR")},async GenerateRoutes(e,t){const n=await Fe(t);return e.commit("SET_ROUTES",n),n}}}},getters:{bgColor:e=>e.skin.bgColor,token:e=>e.user.token,userName:e=>e.user.userName,account:e=>e.user.account,avatar:e=>e.user.avatar,routes:e=>e.user.routes,sidebar:e=>e.user.sidebar}});const Ye=["/login"];ee.configure({showSpinner:!1}),He.beforeEach((async(e,t,n)=>{var a;ee.start(),document.title=(a=e.meta.title)?`${a} - EPG管理系统`:"EPG管理系统";const o=We();if(o){const{routes:t}=Xe.getters;if(Array.isArray(t)&&t.length>0)n();else{const t=await Xe.dispatch("GetUserInfo",o);if(!(Array.isArray(t)&&t.length>0))return alert("无权限"),!1;(await Xe.dispatch("GenerateRoutes",t)).forEach((e=>He.addRoute(e))),n(c(i({},e),{replace:!0}))}}else-1!==Ye.indexOf(e.path)?n():n(`/login?redirect=${e.path}`);ee.done()}));const Ze=l({props:{name:{type:String,required:!0},color:{type:String,default:""}},setup:e=>({iconName:O((()=>`#icon-${e.name}`)),svgClass:O((()=>"svg-icon"))})});Ze.render=function(e,t,n,a,o,r){return d(),m("svg",{class:e.svgClass,style:{color:e.color}},[p("use",{"xlink:href":e.iconName},null,8,["xlink:href"])],6)};const et=te(ne);et.directive("focus",{mounted(e,t){e.focus()}}),(e=>{e.component(V.name,V),e.component(B.name,B),e.component(q.name,q),e.component(U.name,U),e.component(G.name,G),e.component($.name,$),e.component(H.name,H),e.component(z.name,z),e.component(J.name,J),e.component(K.name,K),e.component(F.name,F),e.component(Q.name,Q),e.component(W.name,W),e.component(X.name,X),e.component(Y.name,Y),e.component(Z.name,Z)})(et),et.component("svg-icon",Ze),et.use(Xe),et.use(He),et.mount("#app");export{Je as A,Ke as e};
